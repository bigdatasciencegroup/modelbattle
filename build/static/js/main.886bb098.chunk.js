(this.webpackJsonpresults=this.webpackJsonpresults||[]).push([[0],{35:function(e,t,n){e.exports=n(64)},40:function(e,t,n){},59:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(29),u=n.n(c),o=(n(40),n(24)),s=n(9),i=n.n(s),l=n(15),p=n(16),f=n(6),m=n.n(f),h=n(30),d=n.n(h),b=n(12),v=n(34);n(59);m.a.initializeApp({apiKey:"AIzaSyDc8kZCL0_ai9tCds8bwXYiJiy8xgEv3uU",authDomain:"experiments-573d7.firebaseapp.com",databaseURL:"https://experiments-573d7.firebaseio.com",projectId:"experiments-573d7",storageBucket:"experiments-573d7.appspot.com",messagingSenderId:"450691706719",appId:"1:450691706719:web:e60b4879afd17d34cbd0ea",measurementId:"G-CHD125KKCH"}),m.a.analytics();var g=m.a.storage(),x=m.a.database(),w={signInFlow:"popup",signInSuccessUrl:"/exp",signInOptions:[m.a.auth.GoogleAuthProvider.PROVIDER_ID,m.a.auth.GithubAuthProvider.PROVIDER_ID]};function E(e){return e.sort((function(){return Math.random()-.5}))}function k(e){var t=m.a.auth().currentUser,n=r.a.useState(!1),a=Object(p.a)(n,2),c=a[0],u=a[1],s=r.a.useRef(),f=r.a.useState([]),h=Object(p.a)(f,2),d=h[0],v=h[1],w=r.a.useState([]),k=Object(p.a)(w,2),O=k[0],j=k[1],y=r.a.useState([]),I=Object(p.a)(y,2),A=I[0],C=I[1],S=r.a.useState(!1),D=Object(p.a)(S,2),R=D[0],N=D[1];return r.a.useEffect((function(){s.current=m.a.auth().onAuthStateChanged((function(t){return u(!0),t||e.history.push("/"),function(){s.current()}}))})),r.a.useEffect((function(){var e=!0;t&&function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a,r,c,u,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.ref("meta").child("a_dir").once("value");case 2:return t=e.sent,e.next=5,x.ref("meta").child("b_dir").once("value");case 5:return n=e.sent,a=t.val(),r=n.val(),e.next=10,g.ref(a).listAll();case 10:return c=e.sent,u=c.items,e.next=14,g.ref(r).listAll();case 14:return o=e.sent,s=o.items,e.abrupt("return",{a:u,b:s});case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then(function(){var t=Object(l.a)(i.a.mark((function t(n){var a,r,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.a,r=n.b,!e||d.length||O.length){t.next=10;break}return t.next=4,Promise.all(a.map(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getDownloadURL());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return c=t.sent,t.next=7,Promise.all(r.map(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getDownloadURL());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:u=t.sent,v(E(c)),j(E(u));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){e=!1}}),[d.length,O.length,t]),!t&&c?r.a.createElement(b.a,{to:"/"}):r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header images"},!!t&&r.a.createElement("button",{className:"btn logout",type:"button",onClick:Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.auth().signOut();case 2:case"end":return e.stop()}}),e)})))},"Logout"),r.a.createElement("span",{className:"title"},"Which is better?"),r.a.createElement("br",null),d.length===O.length&&d.map((function(e,t){var n=O[t];return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement("div",{className:"exp-image-wrap"},r.a.createElement("img",{className:"exp-image".concat(A[t]&&"a"===A[t].vote?" selected":""),src:e,alt:e,onClick:function(){var a=Object(o.a)(A);a[t]={a:e,b:n,vote:"a"},C(a)}}),r.a.createElement("img",{className:"exp-image".concat(A[t]&&"b"===A[t].vote?" selected":""),src:n,alt:n,onClick:function(){var a=Object(o.a)(A);a[t]=a[t]={a:e,b:n,vote:"b"},C(a)}})),t<d.length-1&&r.a.createElement("hr",null))})),r.a.createElement("button",{className:"btn done",disabled:R||A.filter((function(e){return!!e})).length!==d.length,type:"button",onClick:Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=8;break}return N(!0),t=m.a.auth().currentUser.uid,e.next=5,x.ref("results").child(t).push(A);case 5:C([]),N(!1),window.scrollTo({top:0,left:0,behavior:"smooth"});case 8:case"end":return e.stop()}}),e)})))},"Done")))}function O(e){var t=r.a.useState(!1),n=Object(p.a)(t,2),a=n[0],c=n[1],u=r.a.useRef();return r.a.useEffect((function(){return u.current=m.a.auth().onAuthStateChanged((function(t){c(!0),t&&e.history.push("/exp")})),function(){u.current()}})),a&&m.a.auth().currentUser?r.a.createElement(b.a,{to:"/exp"}):r.a.createElement(d.a,{uiConfig:w,firebaseAuth:m.a.auth()})}var j=function(){return r.a.createElement(v.a,null,r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/exp",component:k}),r.a.createElement(b.b,{path:"/",component:O})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.886bb098.chunk.js.map